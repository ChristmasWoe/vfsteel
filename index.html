<!DOCTYPE html>
<html lang="cz">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="./style.css" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-F3w7mX95PdgyTmZZMECAngseQB83DfGTowi0iMjiWaeVhAn4FJkqJByhZMI3AhiU"
      crossorigin="anonymous"
    />
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-/bQdsTh/da6pkI1MST/rWKFNjaCP5gBSY4sEBT38Q/9RBh9AH40zEOg7Hlq2THRZ"
      crossorigin="anonymous"
    ></script>
    <title>VF Steel</title>
    <link rel="shortcut icon" href="./icon/favicon.ico" type="image/x-icon" />
    <script src="https://unpkg.com/flickity@2/dist/flickity.pkgd.min.js"></script>
    <link
      rel="stylesheet"
      href="https://unpkg.com/flickity@2/dist/flickity.min.css"
    />
  </head>
 
  <body>
    <script src="./script-imgs.js"></script>
    <!-- HEADER -->
    <section class='header_block'>
      <div class="container">
        <div class="header">
          <div class="header_logo">
            <img src="https://firebasestorage.googleapis.com/v0/b/vfsteel-ada5d.appspot.com/o/service%2Fvf_logo01.png?alt=media&token=9e6812c6-d993-4dd1-a4cf-c9bdb8bc2eb6" alt="logo" class="logo" />
          </div>
          <menu class="menu">
            <button class="header_nav" id="scroll_to_main">
              ÚVODNÍ STRÁNKA
            </button>
            <button class="header_nav" id="scroll_to_carousel">
              <!-- <a href="#carouselExampleIndicators"> -->
                Naše práce
              <!-- </a> -->
            </button>
            <button class="header_nav" id="scroll_to_info">KONTAKTY</button>
            <button class="header_nav" id="scroll_to_license">GDPR</button>
            <button class="header_nav" id="scroll_to_pomoc">O NÁS</button>
          </menu>
        </div>
      </div>
    </section>
    <!-- MAIN BLOCK -->
    <section class="main_block">
      <div class="container">
        <div class="main_text">VÝROBA KOVOVÝCH PRODUKTŮ NA MÍRU</div>
        <div class="main_subtext">
          svařování - obrábění - zámečnictví - zakázková výroba - motodoplňky
        </div>
      </div>
    </section>
    <!-- CAROUSEL -->
    <!-- INFO -->
    <section class="info_block">
    <section id="prace" class='carousel_block'>
      <h3 class="main_CONTACTS">
        Naše práce
      </h2>
      <div class="photos_block">
        <div class="carousel slide" data-ride="carousel">
          <ol class="carousel-indicators">
            <li data-target="#carouselExampleIndicators" data-slide-to="0" class="active"></li>
            <li data-target="#carouselExampleIndicators" data-slide-to="1"></li>
            <li data-target="#carouselExampleIndicators" data-slide-to="2"></li>
          </ol>
          <div id="photos-slider" class="carousel-inner">
    
          </div>
          <a class="carousel-control-prev" href="#carouselExampleIndicators" role="button" data-slide="prev">
            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
            <!-- <span class="sr-only"> &lt; </span> -->
          </a>
          <a class="carousel-control-next" href="#carouselExampleIndicators" role="button" data-slide="next">
            <span class="carousel-control-next-icon" aria-hidden="true"></span>
            <!-- <span class="sr-only">&gt;</span> -->
          </a>
        </div>
      </div>

    </section>
    <!-- FOOTER -->
    <section class='contacts_block'>
      <h3 class="main_CONTACTS">KONTAKTY</h3>
      <div class="container">
        <div class="CONTACTS">
          <div class="addresses">
            Adresa provozovny <br />
            VF Steel s.r.o. <br />
            Slaměníkova 23b <br />
            614 00 Brno <br />
            info@vfsteel.cz
          </div>
          <div class="tel">
            Kontakty <br />Štěpán Frank <br />+420 725 080 961 <br />Michal
            Voškeruša <br />+420 602 182 617
          </div>
          <div class="number">
            Fakturační údajeVF Steel s.r.o.<br />Kopeček 185<br />691 67
            Šakvice<br />IČO: 09500537<br />DIČ: CZ09500537
          </div>
        </div>
      </div>
    </section>
    <div class="container">
      <div class="divider"></div>
    </div>
    <!--Pomoc-->
    <section class="pomoc_block">
      <div class="container">
        <h3 class="Pomoc">
          Pomoc při malé sériové výrobě kovových produktů? Nebo co kus to
          originál.VF Steel Vám pomůže s obojím.
        </h3>
        <div class="pomoc_info">
          <div class="pomoc_info_1">
            svařování<br />obrábění<br />zámečnictví<br />zakázková výroba
          </div>
          <div class="pomoc_info_2">
            motodoplňky<br />ploty, branky, mříže<br />kovový nábytek<br />`bytové
            doplňky a dekorace<br />hudební nástroje a dpolňky<br />industriální
            tvorba
          </div>
          <div class="pomoc_info_3">
            Pracujeme s klasickými stroji:<br />soustruh<br />fréza<br />ruční
            obrábění<br />svářecí stroje (Co2, autogen,<br />elektroda, tig)
          </div>
        </div>
      </div>
    </section>
      <a class="btn btn-primary" id="gdpr-button" data-bs-toggle="collapse" href="#collapseExample" role="button" aria-expanded="false" aria-controls="collapseExample">
        Zásady zpracování osobních údajů
      </a>
    <!-- </p> -->
    <div class="collapse" id="collapseExample">
      <div class="card card-body">
        Zásady zpracování osobních údajů <br> <br>
        1. Základní ustanovení <br>
        <ol type="I" class="card_card-body_1">
          <li>Správcem osobních údajů podle čl. 4 bod 7 nařízení Evropského parlamentu a Rady (EU) 2016/679 o ochraně fyzických osob v souvislosti se zpracováním osobních údajů a o volném pohybu těchto údajů (dále jen: "GDPR") je VF Steell. s. r. o., IČ:09500537, se sídlem Kopeček 185, 691 67 Šakvice (dále jen: "správce").
          </li>
          <li>Kontaktní údaje správce jsou
            adresa: Kopeček 185, 691 67 Šakvice
            e-mail: info@vfsteel.cz
            telefon: +420602 182 617, +420 725 080 961</li>
          <li>Osobním údajem se ve smyslu nařízení Evropského parlamentu a Rady (EU) 2016/6792016/679 o ochraně fyzických osob v souvislosti se zpracováním osobních údajů a o volném pohybu těchto údajů a o zrušení směrnice 95/46/ES (dále jen "GDPR") rozumí veškeré informace o identifikované nebo identifikovatelné fyzické osobě</li>
        </ol>
        2. Zdroje a účel zpracování osobních údajů
        <ol type="I" class="card_card-body_1">
          <li> Správce zpracovává osobní údaje, které jste mu poskytl/a nebo osobní údaje, které správce získal na základě plnění Vaší objednávky.</li>
          <li>Správce zpracovává Vaše identifikační a kontaktní údaje a údaje nezbytné pro plnění smlouvy </li>
          <li>Správce zpracovává osobní údaje na základě zákonného důvodu, či oprávněného zájmu, jehož cílem je plnění smlouvy.</li>
          <li> Zákonným důvodem zpracování osobních údajů je <br>
            • plnění smlouvy mezi Vámi a správcem podle čl. 6 odst. 1 písm. b) GDPR, <br>
            • oprávněný zájem správce na poskytování přímého marketingu (zejména pro zasílání obchodních sdělení a newsletterů) podle čl. 6 odst. 1 písm. f) GDPR, <br>
            • Váš souhlas se zpracováním pro účely poskytování přímého marketingu (zejména pro zasílání obchodních sdělení a newsletterů) podle čl. 6 odst. 1 písm. a) GDPR ve spojení s § 7 odst. 2 zákona č. 480/2004 Sb., o některých službách informační společnosti v případě, že nedošlo k objednávce zboží nebo služby.</li>
            <li> Účelem zpracování osobních údajů je<br>
              • vyřízení Vaší objednávky a výkon práv a povinností vyplývajících ze smluvního vztahu mezi Vámi a správcem; při objednávce jsou vyžadovány osobní údaje, které jsou nutné pro úspěšné vyřízení objednávky (jméno a adresa, kontakt), poskytnutí osobních údajů je nutným požadavkem pro uzavření a plnění smlouvy, bez poskytnutí osobních údajů není možné smlouvu uzavřít či jí ze strany správce plnit,<br>
              • zasílání obchodních sdělení a činění dalších marketingových aktivit.
            </li>
        </ol>
        3. Doba uchovávání údajů
        <ol type="I" class="card_card-body_1">
          <li>Správce uchovává osobní údaje<br>
            • po dobu nezbytnou k výkonu práv a povinností vyplývajících ze smluvního vztahu mezi Vámi a správcem a uplatňování nároků z těchto smluvních vztahů<br>
            • po dobu, než je odvolán souhlas se zpracováním osobních údajů pro účely marketingu, nejdéle 5 let, jsou-li osobní údaje zpracovávány na základě souhlasu. 
          </li>
          <li> Po uplynutí doby uchovávání osobních údajů správce osobní údaje vymaže</li>
        </ol>
        4. Příjemci osobních údajů (subdodavatelé správce)
        <ol type="I" class="card_card-body_1">
          <li>Příjemci osobních údajů jsou osoby: Michal Voškeruša, Štpán Frank<br>
            • podílející se na dodání zboží / služeb / realizaci plateb na základě smlouvy,<br>
            • zajišťující služby provozování e-shopu (webové prezentace) a další služby v souvislosti s provozováním e-shopu (webové prezentace).<br>
            • zajišťující marketingové služby.
          </li>
          <li>Správcenemá v úmyslu předat osobní údaje do třetí země (do země mimo EU) nebo mezinárodní organizaci.
          </li>
        </ol>
        5. Vaše práva
        <ol type="I" class="card_card-body_1">
          <li>Za podmínek stanovených v GDPR máte<br>
            • právo na přístup ke svým osobním údajům dle čl. 15 GDPR,<br>
            • právo na opravu osobních údajů dle čl. 16 GDPR, popřípadě omezení zpracování dle čl. 18 GDPR.<br>
            • právo na výmaz osobních údajů dle čl. 17 GDPR.<br>
            • právo vznést námitku proti zpracování dle čl. 21 GDPR a<br>
            • právo na přenositelnost údajů dle čl. 20 GDPR.<br>
            • právo odvolat souhlas se zpracováním písemně nebo elektronicky na adresu nebo email správce uvedený v čl. III těchto podmínek.
          </li>
          <li>Dále máte právo podat stížnost u Úřadu pro ochranu osobních údajů v případě, že se domníváte, že bylo porušeno Vaší právo na ochranu osobních údajů.</li>
        </ol>
        6. Podmínky zabezpečení osobních údajů
        <ol type="I" class="card_card-body_1">
          <li>Správce prohlašuje, že přijal veškerá vhodná technická a organizační opatření k zabezpečení osobních údajů.</li>
          <li>Správce přijal technická opatření k zabezpečení datových úložišť a úložišť osobních údajů v listinné podobě.</li>
          <li>Správce prohlašuje, že k osobním údajům mají přístup pouze jím pověřené osoby.</li>
        </ol>
        7. Závěrečná ustanovení
        <ol type="I" class="card_card-body_1">
          <li>Odesláním objednávky z internetového objednávkového formuláře potvrzujete, že jste seznámen/a s podmínkami ochrany osobních údajů a že je v celém rozsahu přijímáte.</li>
          <li> S těmito podmínkami souhlasíte zaškrtnutím souhlasu prostřednictvím internetového formuláře. Zaškrtnutím souhlasu potvrzujete, že jste seznámen/a s podmínkami ochrany osobních údajů a že je v celém rozsahu přijímáte. </li>
          <li> Správce je oprávněn tyto podmínky změnit. Novou verzi podmínek ochrany osobních údajů zveřejní na svých internetových stránkách a zároveň Vám zašle novou verzi těchto podmínek na Vaši e-mailovou adresu, kterou jste správci poskytl/a.</li>
        </ol>
        Tyto podmínky nabývají účinnosti dnem 21. 9. 2020
      </div>
    </div>
    </div>
    </div>
    <!--footer-->
    <footer>
        <div class="main_footer">
          © 2021 | &nbsp;<a href="#" id="footer_company">VF Steel s.r.o.</a>
        </div>
    </footer>
    <!-- preview -->
    <div class="preview">
      <button id="closePreview">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-x"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
      </button>
      <div id="carouselExampleControls" class="carousel slide previewContainer" data-bs-ride="carousel"  data-bs-interval="false">
        <div class="carousel-inner">
        </div>
        <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleControls" data-bs-slide="prev">
          <span class="carousel-control-prev-icon" aria-hidden="true"></span>
          <span class="visually-hidden">Previous</span>
        </button>
        <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleControls" data-bs-slide="next">
          <span class="carousel-control-next-icon" aria-hidden="true"></span>
          <span class="visually-hidden">Next</span>
        </button>
      </div>
    </div>
    <script type="module">
      // Import the functions you need from the SDKs you need
      import { initializeApp } from "https://www.gstatic.com/firebasejs/9.0.2/firebase-app.js";
      import { getAnalytics } from "https://www.gstatic.com/firebasejs/9.0.2/firebase-analytics.js";
      import {getFirestore,collection,getDocs} from "https://www.gstatic.com/firebasejs/9.0.2/firebase-firestore.js"
      import { getStorage, ref, listAll,getDownloadURL } from "https://www.gstatic.com/firebasejs/9.0.2/firebase-storage.js";

      const firebaseConfig = {
        apiKey: "AIzaSyDh-wMqQ_K_SKi7njCNNmytIWyW_zmAQNU",
        authDomain: "vfsteel-ada5d.firebaseapp.com",
        projectId: "vfsteel-ada5d",
        storageBucket: "vfsteel-ada5d.appspot.com",
        messagingSenderId: "583840576946",
        appId: "1:583840576946:web:2ff9cdcbd4c9c4bb9c20ab",
        measurementId: "G-4Z67F95S91"
      };
    
      const app = initializeApp(firebaseConfig);
      const analytics = getAnalytics(app);
      let body = document.getElementsByTagName("body")[0]
      const db = getFirestore(app);
      const storage = getStorage(app);
      // const listRef = ref(storage, 'imgs');
      console.log("db",db,collection)
      const listFunction = async () => {
        const querySnapshot = await getDocs(collection(db, "products"));
        let docs=[];
        querySnapshot.forEach((doc) => {
          docs.push({id:doc.id,...doc.data()})
        });
        getLinks(docs)
      }

      function controls(){
        let slider = document.getElementById("photos-slider");
        let prevCtrl = document.querySelector('[data-slide="prev"]');
        let nextCtrl = document.querySelector('[data-slide="next"]');
        let slides = slider.children;
        let arr = Array.prototype.slice.call(slides)
        
        nextCtrl.addEventListener("click",function(e){
          let currentIndex;
          for(let i = 0; i < arr.length;i++){
            if(arr[i].classList.contains("active")){
              currentIndex = i;
              arr[i].setAttribute("class","carousel-item")
              if(currentIndex+1==arr.length){
                arr[0].setAttribute("class","carousel-item active")
              }else{
                arr[i+1].setAttribute("class","carousel-item active")
              }
              break
            }
          }
        })
        prevCtrl.addEventListener("click",function(e){
          let currentIndex;
          for(let i =0; i < arr.length;i++){
            if(arr[i].classList.contains("active")){
              currentIndex = i;
              arr[i].setAttribute("class","carousel-item")
              if(currentIndex==0){
                arr[arr.length-1].setAttribute("class","carousel-item active")
              }else{
                arr[i-1].setAttribute("class","carousel-item active")
              }
              break
            }
          }
        })
      }

      async function getLinks(links){
        window.imgs = links
        let previewContainer = document.querySelector(".previewContainer")
        let previewInner = previewContainer.children[0];
        for(let j = 0; j < links.length;j++){          
          let carItem = document.createElement("div");
          carItem.setAttribute("class","carousel-item");
          let carItemPreview = document.createElement("div");
          carItemPreview.setAttribute("class","preview_img");
          let carItemPreviewImg = document.createElement("img");
          carItemPreviewImg.setAttribute("src",links[j].imageUrl);
          carItemPreview.appendChild(carItemPreviewImg);
          carItem.appendChild(carItemPreview);
          previewInner.appendChild(carItem);
        }

        let avW = window.innerWidth;
        let card_width = 360;
        let gap = 20;
        let pad_width = 60; 
        let cards_per_line;
        switch(true){
          case (avW-2*pad_width < card_width):
            cards_per_line = 1;
            break;
          case (avW-2*pad_width < 2*card_width):
            cards_per_line = 1;
            break;
          case (avW-2*pad_width < 3*card_width):
            cards_per_line = 2;
            break;
          case (avW-2*pad_width < 4*card_width):
            cards_per_line = 3;
            break;
          default:
            cards_per_line = 4;
            break;
        }
        let cards_per_slide = cards_per_line * 3;
        let slides_amount = Math.ceil(links.length / cards_per_slide);
        let slider = document.getElementById("photos-slider");

        for(let i = 0; i < slides_amount; i++) {
          let slide = document.createElement("div")
          if(i==0){
            slide.setAttribute("class","carousel-item active");
          }else{
            slide.setAttribute("class","carousel-item");
          }

          for(let cr=0;cr < 3;cr++){
            let row = document.createElement("div")
            row.setAttribute("class","photo_row")
            slide.appendChild(row);
            for(let currentCardIndex = 0;currentCardIndex<cards_per_line;currentCardIndex++){
              let card = document.createElement("div");
              let cardImg = document.createElement("div");
              if(i*3*cards_per_line+cr*cards_per_line+currentCardIndex>=links.length){
                slider.appendChild(slide);
                controls()
                return;
              }
              cardImg.setAttribute("class","mask")

              let h2 = document.createElement("h2")
              h2.innerHTML = links[i*3*cards_per_line+cr*cards_per_line+currentCardIndex].name;
              cardImg.appendChild(h2);
              let p = document.createElement("p");
              p.innerHTML = links[i*3*cards_per_line+cr*cards_per_line+currentCardIndex].description;
              cardImg.appendChild(p);
              let preview = document.createElement("a");
              preview.innerHTML = "Узнать больше";

              preview.setAttribute("class","info");
              preview.addEventListener("click",e=>{
                let previewWindow = document.querySelector(".preview");
                
                let previewSlides = previewInner.children;
                for(let index in previewSlides) {
                  if(index <= previewSlides.length) {
                    previewSlides[index].setAttribute("class","carousel-item");                    
                  }
                }
                let toBecomeActive = previewSlides.item(i*3*cards_per_line+cr*cards_per_line+currentCardIndex);

                toBecomeActive.setAttribute("class","carousel-item active");

                previewWindow.style.display = "block";
                let closePreview = document.getElementById("closePreview");
                closePreview.addEventListener("click",e=>{
                  previewWindow.style.display="none"
                })
                window.addEventListener("keydown",e=>{
                if(e.keyCode==27){
                  previewWindow.style.display="none"
                }
                })
              })
              cardImg.appendChild(preview)
              cardImg.setAttribute("id","photo-"+(i*3*cards_per_line+cr*cards_per_line+currentCardIndex))
              card.style.background = `url(${links[i*3*cards_per_line+cr*cards_per_line+currentCardIndex].imageUrl})`
              card.appendChild(cardImg);
              row.appendChild(card);
              let natHeight = cardImg.naturalHeight;
            }
          }
          slider.appendChild(slide);
        }
        controls()
      }
      listFunction()
    </script>
    <script src="./script.js"></script>
  </body>
</html>
